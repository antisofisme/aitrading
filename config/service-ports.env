# Service Port Allocation - Hybrid AI Trading System
# This file defines all port allocations to prevent conflicts

# =============================================================================
# CLIENT SIDE SERVICES (Local PC) - Ports 9001-9004
# =============================================================================
METATRADER_CONNECTOR_PORT=9001
DATA_COLLECTOR_PORT=9002
MARKET_MONITOR_PORT=9003
CONFIG_MANAGER_PORT=9004

# =============================================================================
# SERVER SIDE SERVICES (Cloud/Remote)
# =============================================================================

# Core Infrastructure Services (8000-8009)
API_GATEWAY_PORT=8000
DATA_BRIDGE_PORT=8001
PERFORMANCE_ANALYTICS_PORT=8002
AI_ORCHESTRATION_PORT=8003
# PORT 8004-8006 RESERVED for future expansion
TRADING_ENGINE_PORT=8007
DATABASE_SERVICE_PORT=8008
USER_SERVICE_PORT=8009

# PORT 8010 RESERVED for future AI expansion

# AI/ML Pipeline Services (8011-8016)
FEATURE_ENGINEERING_PORT=8011
ML_SUPERVISED_PORT=8012
ML_DEEP_LEARNING_PORT=8013
PATTERN_VALIDATOR_PORT=8014
TELEGRAM_SERVICE_PORT=8015
BACKTESTING_ENGINE_PORT=8016

# Compliance & Regulatory Services (8017-8019)
COMPLIANCE_MONITOR_PORT=8017
AUDIT_TRAIL_PORT=8018
REGULATORY_REPORTING_PORT=8019

# =============================================================================
# INFRASTRUCTURE SERVICES (Non-HTTP)
# =============================================================================
KAFKA_PORT=9092
ZOOKEEPER_PORT=2181
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_TRANSPORT_PORT=9300
JAEGER_UI_PORT=16686
JAEGER_COLLECTOR_PORT=14268
AIRFLOW_WEBSERVER_PORT=8080
REDIS_PORT=6379
REDIS_INSIGHT_PORT=8001

# =============================================================================
# DATABASE PORTS (Internal Network Only)
# =============================================================================
POSTGRES_PORT=5432
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_NATIVE_PORT=9000
DRAGONFLYDB_PORT=6380
WEAVIATE_PORT=8080
ARANGODB_PORT=8529

# =============================================================================
# MONITORING & OBSERVABILITY PORTS
# =============================================================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
ALERTMANAGER_PORT=9093

# =============================================================================
# SECURITY & ACCESS CONTROL
# =============================================================================
# Public Access (via Load Balancer/Proxy)
PUBLIC_API_PORT=8000

# Internal Network Ports (VPN Required)
INTERNAL_START_PORT=8001
INTERNAL_END_PORT=8019

# Compliance Network Ports (Enhanced Security)
COMPLIANCE_START_PORT=8017
COMPLIANCE_END_PORT=8019

# =============================================================================
# DEPLOYMENT ENVIRONMENT VARIABLES
# =============================================================================
# Docker Compose Network Configuration
DOCKER_NETWORK_NAME=aitrading_network
COMPLIANCE_NETWORK_NAME=compliance_network

# Service Health Check URLs
API_GATEWAY_HEALTH_URL=http://localhost:${API_GATEWAY_PORT}/health
TRADING_ENGINE_HEALTH_URL=http://localhost:${TRADING_ENGINE_PORT}/health
COMPLIANCE_MONITOR_HEALTH_URL=http://localhost:${COMPLIANCE_MONITOR_PORT}/health
AUDIT_TRAIL_HEALTH_URL=http://localhost:${AUDIT_TRAIL_PORT}/health
REGULATORY_REPORTING_HEALTH_URL=http://localhost:${REGULATORY_REPORTING_PORT}/health

# =============================================================================
# PORT CONFLICT PREVENTION
# =============================================================================
# Reserved Ports (Do Not Use)
RESERVED_PORTS=8004,8005,8006,8010,8020,8021,8022,8023,8024,8025

# Future Expansion Ports
FUTURE_AI_SERVICES_START=8020
FUTURE_AI_SERVICES_END=8029
FUTURE_COMPLIANCE_SERVICES_START=8030
FUTURE_COMPLIANCE_SERVICES_END=8039

# =============================================================================
# VALIDATION RULES
# =============================================================================
# All service ports must be unique
# Client ports: 9001-9004
# Server ports: 8000-8019 (active), 8020+ (future)
# Infrastructure ports: Various (documented above)
# No port conflicts allowed
# All ports must be documented in PORT_ALLOCATION_REFERENCE.md

# =============================================================================
# USAGE INSTRUCTIONS
# =============================================================================
# 1. Source this file in your deployment scripts:
#    source ./config/service-ports.env
#
# 2. Use variables in Docker Compose:
#    ports: ["${API_GATEWAY_PORT}:8000"]
#
# 3. Validate before deployment:
#    ./scripts/validate-ports.sh
#
# 4. Update PORT_ALLOCATION_REFERENCE.md when adding new services