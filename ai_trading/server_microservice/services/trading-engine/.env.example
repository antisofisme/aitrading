# =========================================
# Trading Engine Service Environment Variables
# Service: trading-engine (Port: 8007)
# =========================================

# Service Configuration
MICROSERVICE_ENVIRONMENT=development
TRADING_ENGINE_PORT=8007
TRADING_ENGINE_DEBUG=false
TRADING_ENGINE_HOST=0.0.0.0

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGINS=*

# Rate Limiting
RATE_LIMITING_ENABLED=true
RATE_LIMITING_REQUESTS_PER_MINUTE=2000

# Basic Trading Configuration
TRADING_MAX_CONCURRENT_ORDERS=1000
TRADING_ORDER_TIMEOUT_SECONDS=60
TRADING_RISK_CHECK_ENABLED=true

# Basic Risk Management
RISK_MAX_POSITION_SIZE=10.0
RISK_MAX_DAILY_LOSS_PERCENT=5.0
RISK_MAX_DRAWDOWN_PERCENT=10.0
RISK_MARGIN_CALL_LEVEL=50.0

# Strategy Execution
STRATEGY_MAX_ACTIVE_STRATEGIES=100
STRATEGY_BACKTEST_ENABLED=true
STRATEGY_LIVE_TRADING_ENABLED=true

# Telegram Configuration
TELEGRAM_ENABLED=true
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
TELEGRAM_NOTIFY_ORDER_EXECUTIONS=true
TELEGRAM_NOTIFY_RISK_ALERTS=true
TELEGRAM_NOTIFY_PL_UPDATES=true

# Performance Settings
PERFORMANCE_EXECUTION_TIMEOUT_MS=100
PERFORMANCE_BATCH_SIZE=50
PERFORMANCE_CONCURRENT_STRATEGIES=10

# MT5 Bridge Configuration
MT5_BRIDGE_URL=ws://localhost:8765
MT5_BRIDGE_TIMEOUT_SECONDS=30
MT5_BRIDGE_RECONNECT_ATTEMPTS=5
MT5_BRIDGE_HEARTBEAT_INTERVAL=30

# Database Configuration
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=trading_engine_db
DATABASE_USER=postgres
DATABASE_PASSWORD=

# Cache Configuration (Redis)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=2
REDIS_PASSWORD=

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_TRADING_LOGGING=true
ENABLE_RISK_LOGGING=true

# Monitoring Configuration
HEALTH_CHECK_INTERVAL=30
METRICS_ENABLED=true
PERFORMANCE_TRACKING_ENABLED=true

# Security Configuration
ENABLE_AUTHENTICATION=false
API_KEY_HEADER=X-API-Key
ALLOWED_IPS=

# Authentication & JWT
AUTH_ENABLED=false
JWT_SECRET_KEY=
JWT_ALGORITHM=HS256
JWT_TOKEN_EXPIRE_MINUTES=60

# Service-to-Service Authentication Secrets
API_GATEWAY_SERVICE_SECRET=
DATABASE_SERVICE_SECRET=
ML_PROCESSING_SERVICE_SECRET=
AI_ORCHESTRATION_SERVICE_SECRET=
DEEP_LEARNING_SERVICE_SECRET=
DATA_BRIDGE_SERVICE_SECRET=

# =========================================
# Trading Strategies Configuration
# =========================================

# Trading Strategies - General
TRADING_STRATEGIES_ENABLED=true
TRADING_STRATEGIES_EXECUTION_MODE=paper
TRADING_STRATEGIES_MULTI_STRATEGY=true
TRADING_STRATEGIES_MAX_CONCURRENT=5

# Strategy Allocation
TRADING_STRATEGIES_TREND_FOLLOWING_ALLOCATION=0.3
TRADING_STRATEGIES_MEAN_REVERSION_ALLOCATION=0.2
TRADING_STRATEGIES_BREAKOUT_ALLOCATION=0.2
TRADING_STRATEGIES_ARBITRAGE_ALLOCATION=0.1
TRADING_STRATEGIES_AI_DRIVEN_ALLOCATION=0.2

# Trend Following Strategy
TRADING_STRATEGIES_TREND_FOLLOWING=true
TRADING_STRATEGIES_TREND_PERIODS=20,50,200

# Mean Reversion Strategy
TRADING_STRATEGIES_MEAN_REVERSION=true
TRADING_STRATEGIES_MEAN_REVERSION_LOOKBACK=14
TRADING_STRATEGIES_MEAN_REVERSION_THRESHOLD=2.0

# Breakout Strategy
TRADING_STRATEGIES_BREAKOUT=true
TRADING_STRATEGIES_BREAKOUT_CONFIRMATION=3
TRADING_STRATEGIES_BREAKOUT_VOLUME=true

# AI-Driven Strategy
TRADING_STRATEGIES_AI_DRIVEN=true
TRADING_STRATEGIES_AI_CONFIDENCE_THRESHOLD=0.7
TRADING_STRATEGIES_AI_CONSENSUS=true

# Portfolio Management
TRADING_STRATEGIES_PORTFOLIO_REBALANCING=true
TRADING_STRATEGIES_REBALANCING_FREQUENCY=daily
TRADING_STRATEGIES_CORRELATION_ALLOCATION=true

# =========================================
# Advanced Risk Management Configuration
# =========================================

# Risk Management - General
RISK_MANAGEMENT_ENABLED=true
RISK_MANAGEMENT_LEVEL=moderate

# Position Sizing
RISK_MANAGEMENT_POSITION_SIZING=true
RISK_MANAGEMENT_POSITION_SIZING_METHOD=kelly
RISK_MANAGEMENT_MAX_POSITION_SIZE=0.02

# Stop Loss Management
RISK_MANAGEMENT_STOP_LOSS=true
RISK_MANAGEMENT_STOP_LOSS_METHOD=atr
RISK_MANAGEMENT_STOP_LOSS_ATR_MULTIPLIER=2.0

# Take Profit Management
RISK_MANAGEMENT_TAKE_PROFIT=true
RISK_MANAGEMENT_TAKE_PROFIT_METHOD=risk_reward
RISK_MANAGEMENT_RISK_REWARD_RATIO=2.0

# Trailing Stop Configuration
RISK_MANAGEMENT_TRAILING_STOP=true
RISK_MANAGEMENT_TRAILING_STOP_DISTANCE=0.001
RISK_MANAGEMENT_TRAILING_STOP_ACTIVATION=0.5

# Drawdown Protection
RISK_MANAGEMENT_DRAWDOWN_PROTECTION=true
RISK_MANAGEMENT_MAX_DAILY_DRAWDOWN=0.05
RISK_MANAGEMENT_MAX_TOTAL_DRAWDOWN=0.20

# Exposure Limits
RISK_MANAGEMENT_EXPOSURE_LIMITS=true
RISK_MANAGEMENT_MAX_CURRENCY_EXPOSURE=0.10
RISK_MANAGEMENT_MAX_CORRELATION_EXPOSURE=0.15

# Real-time Monitoring
RISK_MANAGEMENT_REALTIME_MONITORING=true
RISK_MANAGEMENT_MONITORING_FREQUENCY=10
RISK_MANAGEMENT_EMERGENCY_STOP=true

# =========================================
# Execution Engine Configuration
# =========================================

# Execution Engine - General
EXECUTION_ENGINE_ENABLED=true
EXECUTION_ENGINE_DELAY=100

# Order Management
EXECUTION_ENGINE_ORDER_MANAGEMENT=true
EXECUTION_ENGINE_DEFAULT_ORDER_TYPE=market
EXECUTION_ENGINE_ORDER_TIMEOUT=30

# Slippage Control
EXECUTION_ENGINE_SLIPPAGE_CONTROL=true
EXECUTION_ENGINE_MAX_SLIPPAGE=0.0001
EXECUTION_ENGINE_SLIPPAGE_TOLERANCE=0.5

# Execution Algorithms
EXECUTION_ENGINE_ALGORITHMS=true
EXECUTION_ENGINE_TWAP=true
EXECUTION_ENGINE_VWAP=true
EXECUTION_ENGINE_ICEBERG=true

# Market Impact Management
EXECUTION_ENGINE_MARKET_IMPACT_MINIMIZATION=true
EXECUTION_ENGINE_MAX_MARKET_IMPACT=0.0005

# Partial Fills
EXECUTION_ENGINE_PARTIAL_FILLS=true
EXECUTION_ENGINE_MIN_FILL_SIZE=0.01

# Latency Optimization
EXECUTION_ENGINE_LATENCY_OPTIMIZATION=true
EXECUTION_ENGINE_MAX_LATENCY=100

# Broker Integration
EXECUTION_ENGINE_BROKER_INTEGRATION=true
EXECUTION_ENGINE_PRIMARY_BROKER=FBS-Demo
EXECUTION_ENGINE_BACKUP_BROKERS=IC-Markets,Dukascopy

# =========================================
# Dashboard Configuration
# =========================================

# Dashboard - General
DASHBOARD_ENABLED=true
DASHBOARD_UPDATE_FREQUENCY=1000

# Real-time Data
DASHBOARD_REALTIME_DATA=true
DASHBOARD_DATA_REFRESH_RATE=500

# Performance Metrics
DASHBOARD_PERFORMANCE_METRICS=true
DASHBOARD_METRICS_DISPLAY=pnl,drawdown,sharpe,win_rate,trades_today

# Risk Monitoring
DASHBOARD_RISK_MONITORING=true
DASHBOARD_RISK_ALERTS=true

# Portfolio Overview
DASHBOARD_PORTFOLIO_OVERVIEW=true
DASHBOARD_PORTFOLIO_ALLOCATION=true

# Charts and Visualization
DASHBOARD_CHARTS=true
DASHBOARD_CHART_TYPES=candlestick,line,volume,indicators

# Notifications
DASHBOARD_NOTIFICATIONS=true
DASHBOARD_NOTIFICATION_METHODS=email,telegram,desktop

# Export and Reporting
DASHBOARD_EXPORT=true
DASHBOARD_EXPORT_FORMATS=csv,excel,pdf,json

# Multi-Broker Support
DASHBOARD_MULTI_BROKER=true
DASHBOARD_BROKER_COMPARISON=true

# =========================================
# Performance Analytics Configuration
# =========================================

# Performance Analytics - General
PERFORMANCE_ANALYTICS_ENABLED=true
PERFORMANCE_ANALYTICS_UPDATE_FREQUENCY=hourly

# Statistical Analysis
PERFORMANCE_ANALYTICS_STATISTICAL=true
PERFORMANCE_ANALYTICS_STATISTICS=sharpe,sortino,calmar,max_drawdown,var,cvar

# Backtesting
PERFORMANCE_ANALYTICS_BACKTESTING=true
PERFORMANCE_ANALYTICS_BACKTESTING_PERIOD=252
PERFORMANCE_ANALYTICS_WALK_FORWARD=true

# Benchmark Comparison
PERFORMANCE_ANALYTICS_BENCHMARK=true
PERFORMANCE_ANALYTICS_BENCHMARK_INSTRUMENTS=SPX500,EURUSD,XAUUSD

# Attribution Analysis
PERFORMANCE_ANALYTICS_ATTRIBUTION=true
PERFORMANCE_ANALYTICS_ATTRIBUTION_LEVELS=strategy,instrument,sector,timeframe

# Risk-Adjusted Returns
PERFORMANCE_ANALYTICS_RISK_ADJUSTED=true
PERFORMANCE_ANALYTICS_RISK_FREE_RATE=0.05

# Monte Carlo Analysis
PERFORMANCE_ANALYTICS_MONTE_CARLO=true
PERFORMANCE_ANALYTICS_MONTE_CARLO_SIMULATIONS=1000

# Stress Testing
PERFORMANCE_ANALYTICS_STRESS_TESTING=true
PERFORMANCE_ANALYTICS_STRESS_SCENARIOS=2008_crisis,covid_2020,flash_crash

# =========================================
# Advanced Telegram Configuration
# =========================================

# Telegram Bot
TELEGRAM_BOT_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Notification Types
TELEGRAM_TRADE_NOTIFICATIONS=true
TELEGRAM_RISK_ALERTS=true
TELEGRAM_PERFORMANCE_UPDATES=true

# Update Settings
TELEGRAM_UPDATE_FREQUENCY=hourly
TELEGRAM_DAILY_SUMMARY=true

# Interactive Commands
TELEGRAM_INTERACTIVE_COMMANDS=true
TELEGRAM_COMMAND_WHITELIST=status,performance,positions,stop_trading

# Security
TELEGRAM_USER_AUTHENTICATION=true
TELEGRAM_AUTHORIZED_USERS=

# =========================================
# Output Execution Settings
# =========================================

# Output Execution - General
OUTPUT_EXECUTION_ENABLED=true
OUTPUT_EXECUTION_DEBUG=false

# Processing Settings
OUTPUT_EXECUTION_MODE=paper
OUTPUT_EXECUTION_MAX_SIMULTANEOUS_ORDERS=10
OUTPUT_EXECUTION_ORDER_QUEUE_SIZE=1000

# Performance Monitoring
OUTPUT_EXECUTION_PERFORMANCE_MONITORING=true
OUTPUT_EXECUTION_PERFORMANCE_METRICS=latency,throughput,success_rate,slippage

# Database Integration
OUTPUT_EXECUTION_DATABASE_ENABLED=true
OUTPUT_EXECUTION_STORE_ORDERS=true
OUTPUT_EXECUTION_STORE_TRADES=true
OUTPUT_EXECUTION_STORE_PERFORMANCE=true

# Logging
OUTPUT_EXECUTION_LOGGING_ENABLED=true
OUTPUT_EXECUTION_LOGGING_LEVEL=INFO
OUTPUT_EXECUTION_METRICS_ENABLED=true

# Error Handling
OUTPUT_EXECUTION_ERROR_HANDLING=true
OUTPUT_EXECUTION_MAX_RETRIES=3
OUTPUT_EXECUTION_RETRY_DELAY=1

# Health Checks
OUTPUT_EXECUTION_HEALTH_CHECK=true
OUTPUT_EXECUTION_HEALTH_CHECK_INTERVAL=60

# =========================================
# Environment-Specific Settings
# Note: Environment-specific overrides are handled in the YAML configuration
# The MICROSERVICE_ENVIRONMENT variable determines which section is used
# =========================================

# Development Environment Settings
# - debug: true
# - log_level: debug
# - live_trading_enabled: false
# - max_position_size: 0.01

# Production Environment Settings
# - debug: false
# - log_level: info
# - live_trading_enabled: true
# - max_position_size: 0.02

# Testing Environment Settings
# - debug: true
# - log_level: debug
# - live_trading_enabled: false
# - max_position_size: 0.001