# Data Bridge Service Environment Variables
# Copy this file to .env and set your actual values

# Service Configuration
MICROSERVICE_ENVIRONMENT=development
DATA_BRIDGE_PORT=8002
DATA_BRIDGE_DEBUG=false
DATA_BRIDGE_HOST=0.0.0.0

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGINS=*

# Rate Limiting
RATE_LIMITING_ENABLED=true
RATE_LIMITING_REQUESTS_PER_MINUTE=5000

# Authentication
AUTH_ENABLED=false
JWT_SECRET_KEY=your_jwt_secret_key_here_minimum_32_characters
JWT_ALGORITHM=HS256
JWT_TOKEN_EXPIRE_MINUTES=60
API_KEY_AUTH_ENABLED=true

# Data Sources Configuration
MT5_ENABLED=true
MT5_CONNECTION_TIMEOUT=30
MT5_MAX_RETRIES=3

DUKASCOPY_ENABLED=true
DUKASCOPY_BASE_URL=https://www.dukascopy.com/swiss/english/marketwatch/historical/
DUKASCOPY_API_KEY=your_dukascopy_api_key_here

TRADINGVIEW_ENABLED=true
TRADINGVIEW_BASE_URL=https://www.tradingview.com/
TRADINGVIEW_API_KEY=your_tradingview_api_key_here

MQL5_ENABLED=true
MQL5_BASE_URL=https://www.mql5.com/
MQL5_API_KEY=your_mql5_api_key_here

# MQL5 Economic Calendar Historical Download Configuration
MQL5_HISTORICAL_DAYS_BACK=30
MQL5_BATCH_SIZE=7
MQL5_BATCH_DELAY_SECONDS=5
MQL5_SKIP_EMPTY_DATES=true
MQL5_MAX_RETRIES_PER_DATE=3
MQL5_BROWSER_TIMEOUT_SECONDS=30

# Weekend Economic Events Handling
MQL5_INCLUDE_WEEKEND_EVENTS=false     # Set true untuk include emergency weekend events
MQL5_WEEKEND_EVENT_TYPES=emergency,central_bank,geopolitical  # Types to look for on weekends

# MT5 Bridge Configuration
MT5_BRIDGE_TIMEOUT_SECONDS=30
MT5_BRIDGE_RETRY_ATTEMPTS=5
MT5_BRIDGE_KEEP_ALIVE_INTERVAL=60
MT5_BRIDGE_MAX_CONCURRENT_CONNECTIONS=10

# MT5 Connection Credentials (REQUIRED if MT5 enabled)
MT5_LOGIN=your_mt5_login_number
MT5_PASSWORD=your_mt5_password_here
MT5_SERVER=MetaQuotes-Demo
MT5_PATH=

# Trading Configuration
TRADING_SYMBOLS=EURUSD,GBPUSD,USDJPY,AUDUSD,USDCAD,USDCHF,NZDUSD,EURJPY,GBPJPY,AUDJPY
TRADING_TIMEFRAMES=M1,M5,M15,M30,H1,H4,D1
TRADING_MAX_HISTORY_BARS=10000

# WebSocket Configuration
WEBSOCKET_ENABLED=true
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_MESSAGE_SIZE_LIMIT=1048576
WEBSOCKET_MESSAGE_COMPRESSION=true

# Real-time Data Configuration
RT_TICK_STREAMING=true
RT_PRICE_UPDATES=true
RT_ACCOUNT_MONITORING=true
RT_POSITION_TRACKING=true

# Caching Configuration
CACHING_ENABLED=true
CACHING_TTL_SECONDS=300

# Performance Configuration
PERFORMANCE_BATCH_SIZE=100
PERFORMANCE_CONCURRENT_CONNECTIONS=50
PERFORMANCE_REQUEST_TIMEOUT=30
PERFORMANCE_DATA_COMPRESSION=true
PERFORMANCE_BATCH_PROCESSING=true
PERFORMANCE_CACHE_MARKET_DATA=true
PERFORMANCE_CACHE_TTL_SECONDS=60

# Monitoring Configuration
HEALTH_CHECK_INTERVAL=30
METRICS_ENABLED=true
PERFORMANCE_TRACKING_ENABLED=true
MONITORING_CONNECTION_HEALTH_CHECK=true
MONITORING_LATENCY_MONITORING=true
MONITORING_ERROR_TRACKING=true
MONITORING_PERFORMANCE_METRICS=true

# Database Configuration
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=data_bridge_db
DATABASE_USER=postgres
DATABASE_PASSWORD=your_database_password_here

# Cache Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=3
REDIS_PASSWORD=your_redis_password_here

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_DATA_LOGGING=true
ENABLE_WEBSOCKET_LOGGING=true

# Security Configuration
ENABLE_AUTHENTICATION=false
API_KEY_HEADER=X-API-Key
ALLOWED_IPS=
DATA_BRIDGE_API_KEY=your_data_bridge_api_key_here

# Service-to-Service Authentication Secrets
API_GATEWAY_SERVICE_SECRET=your_api_gateway_service_secret_here
TRADING_ENGINE_SERVICE_SECRET=your_trading_engine_service_secret_here
AI_ORCHESTRATION_SERVICE_SECRET=your_ai_orchestration_service_secret_here
ML_PROCESSING_SERVICE_SECRET=your_ml_processing_service_secret_here
DATABASE_SERVICE_SECRET=your_database_service_secret_here

# Service Endpoints (optional overrides)
API_GATEWAY_URL=http://api-gateway:8000
DATABASE_SERVICE_URL=http://database-service:8008
CACHE_SERVICE_URL=http://redis:6379

# Message Brokers Configuration
# Redpanda for high-frequency trading data (ticks, orders, positions)
REDPANDA_ENABLED=true
REDPANDA_BOOTSTRAP_SERVERS=localhost:19092
REDPANDA_TICK_TOPIC=mt5-tick-data
REDPANDA_MARKET_TOPIC=market-data-stream
REDPANDA_ORDER_TOPIC=order-updates
REDPANDA_BATCH_SIZE=100
REDPANDA_COMPRESSION=lz4
REDPANDA_RETRIES=3
REDPANDA_GROUP_ID=data-bridge-consumer
REDPANDA_AUTO_OFFSET=latest

# NATS for low-frequency system events (service status, alerts, config)
NATS_ENABLED=true
NATS_SERVERS=nats://localhost:4222
NATS_SERVICE_EVENTS=trading.services.*
NATS_ALERTS=trading.alerts.*
NATS_CONFIG=trading.config.*
NATS_JETSTREAM_ENABLED=true
NATS_STREAM=TRADING_EVENTS
NATS_STORAGE=file
NATS_MAX_AGE=168h