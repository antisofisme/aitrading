# AI Trading Platform - Production Environment
# Phase 1: Infrastructure Migration with Zero-Trust Security

# ===========================================
# NODE ENVIRONMENT
# ===========================================
NODE_ENV=production
NODE_OPTIONS=--max-old-space-size=4096 --enable-source-maps

# ===========================================
# SECURITY CONFIGURATION (CHANGE ALL SECRETS)
# ===========================================
# JWT Secrets (MUST CHANGE FOR PRODUCTION)
JWT_SECRET_PROD=CHANGE-THIS-TO-STRONG-SECRET-MINIMUM-64-CHARS-FOR-PRODUCTION
JWT_REFRESH_SECRET_PROD=CHANGE-THIS-TO-STRONG-REFRESH-SECRET-MINIMUM-64-CHARS
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Encryption Keys (MUST CHANGE FOR PRODUCTION)
ENCRYPTION_KEY=CHANGE-THIS-TO-32-CHAR-ENCRYPTION-KEY
SECURITY_SALT=CHANGE-THIS-TO-SECURITY-SALT-PRODUCTION

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# PostgreSQL - Primary Database
POSTGRES_DB=aitrading_prod
POSTGRES_USER=aitrading_prod
POSTGRES_PASSWORD=CHANGE-THIS-TO-SECURE-POSTGRES-PASSWORD
POSTGRES_HOST=postgres-main
POSTGRES_PORT=5432
POSTGRES_SSL=true
POSTGRES_SSL_MODE=require

# ClickHouse - Log Storage
CLICKHOUSE_DB=aitrading_logs_prod
CLICKHOUSE_USER=aitrading_prod
CLICKHOUSE_PASSWORD=CHANGE-THIS-TO-SECURE-CLICKHOUSE-PASSWORD
CLICKHOUSE_HOST=clickhouse-logs
CLICKHOUSE_PORT=8123
CLICKHOUSE_SSL=true

# DragonflyDB - Cache
DRAGONFLY_PASSWORD=CHANGE-THIS-TO-SECURE-DRAGONFLY-PASSWORD
DRAGONFLY_HOST=dragonfly-cache
DRAGONFLY_PORT=6379
DRAGONFLY_DB=0

# Weaviate - Vector Database
WEAVIATE_API_KEY=CHANGE-THIS-TO-SECURE-WEAVIATE-KEY
WEAVIATE_ADMIN_USER=admin
WEAVIATE_HOST=weaviate
WEAVIATE_PORT=8080
WEAVIATE_SCHEME=https

# ArangoDB - Graph Database
ARANGO_ROOT_PASSWORD=CHANGE-THIS-TO-SECURE-ARANGODB-PASSWORD
ARANGO_DB=aitrading_graph_prod
ARANGO_HOST=arangodb
ARANGO_PORT=8529
ARANGO_SSL=true

# ===========================================
# SERVICE CONFIGURATION
# ===========================================
# Domain Configuration
DOMAIN_NAME=your-domain.com
API_BASE_URL=https://api.your-domain.com
FRONTEND_URL=https://your-domain.com

# Service Ports (Internal)
CENTRAL_HUB_PORT=8010
API_GATEWAY_PORT=8000
DATABASE_SERVICE_PORT=8008
DATA_BRIDGE_PORT=8001
TRADING_ENGINE_PORT=8007
SECURITY_MONITOR_PORT=8020
LOG_AGGREGATOR_PORT=8030

# CORS Configuration
CORS_ORIGIN=https://your-domain.com,https://app.your-domain.com

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
LOG_LEVEL=WARN
LOG_FORMAT=json
LOG_RETENTION_POLICY=production

# Optimized Log Retention Settings (81% Cost Reduction)
HOT_STORAGE_DAYS=3
WARM_STORAGE_DAYS=30
COLD_STORAGE_DAYS=365
LOG_COMPRESSION_ENABLED=true
COST_TRACKING_ENABLED=true
COMPRESSION_ALGORITHM=zstd

# ===========================================
# SECURITY SETTINGS
# ===========================================
# Zero-Trust Configuration
SECURITY_MODE=zero-trust-prod
SECURITY_AUDIT_ENABLED=true
THREAT_DETECTION_ENABLED=true
RATE_LIMITING_ENABLED=true
DDoS_PROTECTION=enhanced

# Enhanced Rate Limiting for Production
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX=60
RATE_LIMIT_AUTH_MAX=10
RATE_LIMIT_API_MAX=100
RATE_LIMIT_WEBSOCKET_MAX=30

# Session Security
SESSION_SECRET=CHANGE-THIS-TO-STRONG-SESSION-SECRET
SESSION_TIMEOUT=1800
SECURE_COOKIES=true
SAME_SITE_COOKIES=strict

# ===========================================
# MT5 INTEGRATION
# ===========================================
# Secure MT5 Configuration
MT5_CREDENTIAL_ENCRYPTION=true
MT5_CONNECTION_POOL_SIZE=5
MT5_HEARTBEAT_INTERVAL=30000
MT5_RECONNECT_INTERVAL=5000
MT5_MAX_RETRIES=3
MT5_TIMEOUT=10000

# Signal Processing
SIGNAL_VALIDATION_ENABLED=true
SIGNAL_VALIDATION_STRICT=true
SIGNAL_EXPIRY_MINUTES=3
SIGNAL_BATCH_SIZE=100

# ===========================================
# WEBSOCKET CONFIGURATION
# ===========================================
WEBSOCKET_SECURITY_ENABLED=true
WEBSOCKET_SSL_ENABLED=true
WEBSOCKET_HEARTBEAT_INTERVAL=30000
WEBSOCKET_CONNECTION_TIMEOUT=60000
WEBSOCKET_MAX_CONNECTIONS=500

# ===========================================
# SUBSCRIPTION & VALIDATION
# ===========================================
SUBSCRIPTION_VALIDATION_ENABLED=true
SUBSCRIPTION_VALIDATION_STRICT=true
SUBSCRIPTION_CACHE_TTL=60
SUBSCRIPTION_RETRY_ATTEMPTS=3

# ===========================================
# PERFORMANCE SETTINGS
# ===========================================
# Database Performance
DB_POOL_SIZE=20
DB_TIMEOUT=30000
DB_RETRY_ATTEMPTS=3
DB_MAX_CONNECTIONS=100

# Cache Settings
CACHE_TTL=1800
CACHE_MAX_MEMORY=2GB

# ===========================================
# MONITORING & HEALTH CHECKS
# ===========================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# Metrics Collection
METRICS_ENABLED=true
METRICS_INTERVAL=60
PERFORMANCE_MONITORING=true
ALERT_THRESHOLD=critical

# ===========================================
# SSL/TLS CONFIGURATION
# ===========================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/nginx/ssl/server.crt
SSL_KEY_PATH=/etc/nginx/ssl/server.key
SSL_CA_PATH=/etc/nginx/ssl/ca.crt
SSL_PROTOCOLS=TLSv1.2,TLSv1.3

# ===========================================
# EXTERNAL SERVICES
# ===========================================
# Email Service (for alerts)
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=alerts@your-domain.com
SMTP_PASSWORD=CHANGE-THIS-TO-SMTP-PASSWORD
SMTP_SECURE=true

# Webhook URLs
SECURITY_ALERT_WEBHOOK=https://your-monitoring.com/webhooks/security
SYSTEM_ALERT_WEBHOOK=https://your-monitoring.com/webhooks/system

# ===========================================
# BACKUP CONFIGURATION
# ===========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_ENCRYPTION_ENABLED=true

# ===========================================
# COMPLIANCE & AUDIT
# ===========================================
AUDIT_TRAIL_ENABLED=true
COMPLIANCE_MODE=strict
GDPR_COMPLIANCE=enabled
DATA_RETENTION_POLICY=strict
ANONYMIZATION_ENABLED=true

# ===========================================
# RESOURCE LIMITS
# ===========================================
# Memory Limits
MAX_MEMORY_CENTRAL_HUB=512M
MAX_MEMORY_API_GATEWAY=1G
MAX_MEMORY_DATABASE_SERVICE=2G
MAX_MEMORY_DATA_BRIDGE=1G
MAX_MEMORY_TRADING_ENGINE=1G

# CPU Limits
MAX_CPU_CENTRAL_HUB=0.5
MAX_CPU_API_GATEWAY=1.0
MAX_CPU_DATABASE_SERVICE=2.0
MAX_CPU_DATA_BRIDGE=1.0
MAX_CPU_TRADING_ENGINE=1.0

# ===========================================
# AUTO-SCALING CONFIGURATION
# ===========================================
AUTO_SCALING_ENABLED=false
MIN_REPLICAS=1
MAX_REPLICAS=3
CPU_THRESHOLD=70
MEMORY_THRESHOLD=80

# ===========================================
# DEVELOPMENT TOOLS (DISABLED IN PRODUCTION)
# ===========================================
HOT_RELOAD_ENABLED=false
WATCH_FILES=false
DEBUG_MODE=false
VERBOSE_LOGGING=false
SOURCE_MAPS=false